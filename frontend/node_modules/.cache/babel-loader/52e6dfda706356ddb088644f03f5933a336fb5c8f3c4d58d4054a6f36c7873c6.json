{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{AuthContext}from'../context/AuthContext';import axios from'axios';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const{user,updateUser,fetchUserProfile}=useContext(AuthContext);const[formData,setFormData]=useState({name:'',email:'',phone:'',department:'',currentPassword:'',newPassword:'',confirmPassword:''});const[loading,setLoading]=useState(true);const[updating,setUpdating]=useState(false);const[changePassword,setChangePassword]=useState(false);// Fetch the latest user data from the database when component mounts\nuseEffect(()=>{const loadProfileData=async()=>{setLoading(true);try{const profileData=await fetchUserProfile();if(!profileData){// If profile data is null, set loading to false to prevent infinite loading\nsetLoading(false);toast.error('Unable to load profile. Please try again later.');return;// Exit early if no profile data\n}setLoading(false);}catch(error){console.error('Error in profile loading:',error);setLoading(false);toast.error('An error occurred while loading your profile.');}};loadProfileData();},[fetchUserProfile]);// Update form data when user data changes\nuseEffect(()=>{if(user){setFormData({name:user.name||'',email:user.email||'',phone:user.phone||'',department:user.department||'',currentPassword:'',newPassword:'',confirmPassword:''});// If we have user data but loading is still true, set it to false\nif(loading){setLoading(false);}}},[user,loading]);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};const handleSubmit=async e=>{e.preventDefault();setUpdating(true);try{// Validate password fields if changing password\nif(changePassword){if(!formData.currentPassword){toast.error('Current password is required');setUpdating(false);return;}if(formData.newPassword!==formData.confirmPassword){toast.error('New passwords do not match');setUpdating(false);return;}if(formData.newPassword.length<6){toast.error('New password must be at least 6 characters');setUpdating(false);return;}}// Prepare data for API call\nconst updateData={name:formData.name,phone:formData.phone};// Only include department if it has a value\nif(formData.department.trim()){updateData.department=formData.department;}// Add password fields if changing password\nif(changePassword){updateData.currentPassword=formData.currentPassword;updateData.newPassword=formData.newPassword;}const response=await axios.put('/api/users/profile',updateData);// Update user context with new data\nupdateUser(response.data);// Fetch the latest profile data from the database\nawait fetchUserProfile();toast.success('Profile updated successfully');// Reset password fields\nif(changePassword){setFormData(prev=>({...prev,currentPassword:'',newPassword:'',confirmPassword:''}));setChangePassword(false);}}catch(error){console.error('Error updating profile:',error);// Handle different types of errors\nif(error.response){var _error$response$data,_error$response$data2;// The request was made and the server responded with a status code\n// that falls out of the range of 2xx\nconst errorMessage=((_error$response$data=error.response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||((_error$response$data2=error.response.data)===null||_error$response$data2===void 0?void 0:_error$response$data2.message)||'Failed to update profile';toast.error(errorMessage);// Log specific error details for debugging\nif(error.response.status===400){console.log('Bad request data:',error.response.data);}else if(error.response.status===401){toast.error('Authentication error. Please log in again.');// Could redirect to login page here\n}else if(error.response.status===404){toast.error('User not found. Please log in again.');}}else if(error.request){// The request was made but no response was received\ntoast.error('No response from server. Please check your connection and try again.');}else{// Something happened in setting up the request that triggered an Error\ntoast.error('An unexpected error occurred. Please try again later.');}}finally{setUpdating(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto py-8 px-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 mb-6\",children:\"Your Profile\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",value:formData.name,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,className:\"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 cursor-not-allowed\",disabled:true}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs text-gray-500\",children:\"Email cannot be changed\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",id:\"phone\",name:\"phone\",value:formData.phone,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"department\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Department\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"department\",name:\"department\",value:formData.department,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"changePassword\",checked:changePassword,onChange:()=>setChangePassword(!changePassword),className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"changePassword\",className:\"ml-2 block text-sm text-gray-700\",children:\"Change Password\"})]})}),changePassword&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 mb-6 border-t border-gray-200 pt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"currentPassword\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Current Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"currentPassword\",name:\"currentPassword\",value:formData.currentPassword,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",required:changePassword})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newPassword\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"newPassword\",name:\"newPassword\",value:formData.newPassword,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",required:changePassword,minLength:\"6\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs text-gray-500\",children:\"Password must be at least 6 characters\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"confirmPassword\",name:\"confirmPassword\",value:formData.confirmPassword,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",required:changePassword})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:updating,children:updating?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Updating...\"]}):'Save Changes'})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 bg-white rounded-lg shadow-md overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800 mb-4\",children:\"Account Statistics\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500\",children:\"Account Created\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold mt-1\",children:user.createdAt?new Date(user.createdAt).toLocaleDateString():'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500\",children:\"Total Complaints\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold mt-1\",children:user.complaintCount||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500\",children:\"Last Login\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold mt-1\",children:user.lastLogin?new Date(user.lastLogin).toLocaleDateString():'N/A'})]})]})]})})]});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useContext","AuthContext","axios","toast","jsx","_jsx","jsxs","_jsxs","Profile","user","updateUser","fetchUserProfile","formData","setFormData","name","email","phone","department","currentPassword","newPassword","confirmPassword","loading","setLoading","updating","setUpdating","changePassword","setChangePassword","loadProfileData","profileData","error","console","handleChange","e","value","target","prev","handleSubmit","preventDefault","length","updateData","trim","response","put","data","success","_error$response$data","_error$response$data2","errorMessage","message","status","log","request","className","children","onSubmit","htmlFor","type","id","onChange","required","disabled","checked","minLength","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","createdAt","Date","toLocaleDateString","complaintCount","lastLogin"],"sources":["C:/Users/thava/OneDrive/Desktop/New folder/Complaint-Management-System/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst Profile = () => {\r\n  const { user, updateUser, fetchUserProfile } = useContext(AuthContext);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    phone: '',\r\n    department: '',\r\n    currentPassword: '',\r\n    newPassword: '',\r\n    confirmPassword: ''\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [updating, setUpdating] = useState(false);\r\n  const [changePassword, setChangePassword] = useState(false);\r\n\r\n  // Fetch the latest user data from the database when component mounts\r\n  useEffect(() => {\r\n    const loadProfileData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const profileData = await fetchUserProfile();\r\n        if (!profileData) {\r\n          // If profile data is null, set loading to false to prevent infinite loading\r\n          setLoading(false);\r\n          toast.error('Unable to load profile. Please try again later.');\r\n          return; // Exit early if no profile data\r\n        }\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error('Error in profile loading:', error);\r\n        setLoading(false);\r\n        toast.error('An error occurred while loading your profile.');\r\n      }\r\n    };\r\n    \r\n    loadProfileData();\r\n  }, [fetchUserProfile]);\r\n\r\n  // Update form data when user data changes\r\n  useEffect(() => {\r\n    if (user) {\r\n      setFormData({\r\n        name: user.name || '',\r\n        email: user.email || '',\r\n        phone: user.phone || '',\r\n        department: user.department || '',\r\n        currentPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: ''\r\n      });\r\n      // If we have user data but loading is still true, set it to false\r\n      if (loading) {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [user, loading]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setUpdating(true);\r\n\r\n    try {\r\n      // Validate password fields if changing password\r\n      if (changePassword) {\r\n        if (!formData.currentPassword) {\r\n          toast.error('Current password is required');\r\n          setUpdating(false);\r\n          return;\r\n        }\r\n        if (formData.newPassword !== formData.confirmPassword) {\r\n          toast.error('New passwords do not match');\r\n          setUpdating(false);\r\n          return;\r\n        }\r\n        if (formData.newPassword.length < 6) {\r\n          toast.error('New password must be at least 6 characters');\r\n          setUpdating(false);\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Prepare data for API call\r\n      const updateData = {\r\n        name: formData.name,\r\n        phone: formData.phone\r\n      };\r\n      \r\n      // Only include department if it has a value\r\n      if (formData.department.trim()) {\r\n        updateData.department = formData.department;\r\n      }\r\n\r\n      // Add password fields if changing password\r\n      if (changePassword) {\r\n        updateData.currentPassword = formData.currentPassword;\r\n        updateData.newPassword = formData.newPassword;\r\n      }\r\n\r\n      const response = await axios.put('/api/users/profile', updateData);\r\n      \r\n      // Update user context with new data\r\n      updateUser(response.data);\r\n      \r\n      // Fetch the latest profile data from the database\r\n      await fetchUserProfile();\r\n      \r\n      toast.success('Profile updated successfully');\r\n      \r\n      // Reset password fields\r\n      if (changePassword) {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          currentPassword: '',\r\n          newPassword: '',\r\n          confirmPassword: ''\r\n        }));\r\n        setChangePassword(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n      \r\n      // Handle different types of errors\r\n      if (error.response) {\r\n        // The request was made and the server responded with a status code\r\n        // that falls out of the range of 2xx\r\n        const errorMessage = error.response.data?.error || error.response.data?.message || 'Failed to update profile';\r\n        toast.error(errorMessage);\r\n        \r\n        // Log specific error details for debugging\r\n        if (error.response.status === 400) {\r\n          console.log('Bad request data:', error.response.data);\r\n        } else if (error.response.status === 401) {\r\n          toast.error('Authentication error. Please log in again.');\r\n          // Could redirect to login page here\r\n        } else if (error.response.status === 404) {\r\n          toast.error('User not found. Please log in again.');\r\n        }\r\n      } else if (error.request) {\r\n        // The request was made but no response was received\r\n        toast.error('No response from server. Please check your connection and try again.');\r\n      } else {\r\n        // Something happened in setting up the request that triggered an Error\r\n        toast.error('An unexpected error occurred. Please try again later.');\r\n      }\r\n    } finally {\r\n      setUpdating(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center py-12\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto py-8 px-4\">\r\n      <h1 className=\"text-3xl font-bold text-gray-800 mb-6\">Your Profile</h1>\r\n      \r\n      <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\r\n        <div className=\"p-6\">\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\r\n              {/* Name */}\r\n              <div>\r\n                <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Full Name\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"name\"\r\n                  name=\"name\"\r\n                  value={formData.name}\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                  required\r\n                />\r\n              </div>\r\n              \r\n              {/* Email (read-only) */}\r\n              <div>\r\n                <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Email Address\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  value={formData.email}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 cursor-not-allowed\"\r\n                  disabled\r\n                />\r\n                <p className=\"mt-1 text-xs text-gray-500\">Email cannot be changed</p>\r\n              </div>\r\n              \r\n              {/* Phone */}\r\n              <div>\r\n                <label htmlFor=\"phone\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Phone Number\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  id=\"phone\"\r\n                  name=\"phone\"\r\n                  value={formData.phone}\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                />\r\n              </div>\r\n              \r\n              {/* Department */}\r\n              <div>\r\n                <label htmlFor=\"department\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Department\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"department\"\r\n                  name=\"department\"\r\n                  value={formData.department}\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Password Change Toggle */}\r\n            <div className=\"mb-6\">\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"changePassword\"\r\n                  checked={changePassword}\r\n                  onChange={() => setChangePassword(!changePassword)}\r\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\r\n                />\r\n                <label htmlFor=\"changePassword\" className=\"ml-2 block text-sm text-gray-700\">\r\n                  Change Password\r\n                </label>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Password Fields (conditional) */}\r\n            {changePassword && (\r\n              <div className=\"space-y-4 mb-6 border-t border-gray-200 pt-4\">\r\n                <div>\r\n                  <label htmlFor=\"currentPassword\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Current Password\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    id=\"currentPassword\"\r\n                    name=\"currentPassword\"\r\n                    value={formData.currentPassword}\r\n                    onChange={handleChange}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                    required={changePassword}\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label htmlFor=\"newPassword\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    New Password\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    id=\"newPassword\"\r\n                    name=\"newPassword\"\r\n                    value={formData.newPassword}\r\n                    onChange={handleChange}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                    required={changePassword}\r\n                    minLength=\"6\"\r\n                  />\r\n                  <p className=\"mt-1 text-xs text-gray-500\">Password must be at least 6 characters</p>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label htmlFor=\"confirmPassword\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Confirm New Password\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    id=\"confirmPassword\"\r\n                    name=\"confirmPassword\"\r\n                    value={formData.confirmPassword}\r\n                    onChange={handleChange}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                    required={changePassword}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {/* Submit Button */}\r\n            <div className=\"flex justify-end\">\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn-primary\"\r\n                disabled={updating}\r\n              >\r\n                {updating ? (\r\n                  <span className=\"flex items-center\">\r\n                    <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                    </svg>\r\n                    Updating...\r\n                  </span>\r\n                ) : 'Save Changes'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Account Statistics */}\r\n      <div className=\"mt-8 bg-white rounded-lg shadow-md overflow-hidden\">\r\n        <div className=\"p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">Account Statistics</h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <h3 className=\"text-sm font-medium text-gray-500\">Account Created</h3>\r\n              <p className=\"text-lg font-semibold mt-1\">\r\n                {user.createdAt ? new Date(user.createdAt).toLocaleDateString() : 'N/A'}\r\n              </p>\r\n            </div>\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <h3 className=\"text-sm font-medium text-gray-500\">Total Complaints</h3>\r\n              <p className=\"text-lg font-semibold mt-1\">{user.complaintCount || 0}</p>\r\n            </div>\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <h3 className=\"text-sm font-medium text-gray-500\">Last Login</h3>\r\n              <p className=\"text-lg font-semibold mt-1\">\r\n                {user.lastLogin ? new Date(user.lastLogin).toLocaleDateString() : 'N/A'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}